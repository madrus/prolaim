!function(){"use strict";angular.module("prolaim",["prolaim.core","prolaim.templates","prolaim.shell","prolaim.about","prolaim.contact","prolaim.jobs","prolaim.main","prolaim.partners","prolaim.sidebar","prolaim.content","prolaim.footer","prolaim.404"]),angular.module("prolaim").config(["$urlRouterProvider","$stateProvider",function(a,e){a.when("","/ru/main").when("/","/ru/main").when("/ru","/ru/main").when("/ru/","/ru/main").when("/ua","/ua/main").when("/ua/","/ua/main").otherwise(function(a){a.get("$state").go("shell.lang.content.404",{},{location:!1})});var t={name:"shell","abstract":!0,url:"/",templateUrl:"app/layout/shell.html",controller:"Shell",controllerAs:"vm"},n={name:"shell.lang",url:"{language:ru|ua}",views:{"header@shell":{templateUrl:"app/layout/header/header.html"},"sidebar@shell":{templateUrl:"app/layout/partials/sidebar.html",controller:"Sidebar",controllerAs:"vm"},"content@shell":{templateUrl:"app/layout/partials/content.html",controller:"Content",controllerAs:"vm"},"footer@shell":{templateUrl:"app/layout/partials/footer.html",controller:"Footer",controllerAs:"vm"},"topnav@shell.lang":{templateUrl:"app/layout/header/topnav.html"},"navbar@shell.lang":{templateUrl:"app/layout/header/navbar.html"}},resolve:{language:function(a){return a.language}}},r={name:"shell.lang.content",url:"/","abstract":!0,template:"<ui-view></ui-view>"},o={name:"shell.lang.content.main",url:"main",templateUrl:"app/main/main.html",controller:"Main",controllerAs:"vm"},l={name:"shell.lang.content.about",url:"about",templateUrl:"app/about/about.html",controller:"About",controllerAs:"vm"},i={name:"shell.lang.content.jobs",url:"jobs",templateUrl:"app/jobs/jobs.html",controller:"Jobs",controllerAs:"vm"},c={name:"shell.lang.content.contact",url:"contact",templateUrl:"app/contact/contact.html",controller:"Contact",controllerAs:"vm"},s={name:"shell.lang.content.partners",url:"partners",templateUrl:"app/partners/partners.html",controller:"Partners",controllerAs:"vm"},u={name:"shell.lang.content.404",url:"404",templateUrl:"app/404/404.html",controller:"P404",controllerAs:"vm"};e.state(t),e.state(n),e.state(r),e.state(o),e.state(l),e.state(i),e.state(c),e.state(s),e.state(u)}])}(),function(){"use strict";angular.module("prolaim.404",["prolaim.config"])}(),function(){"use strict";angular.module("prolaim.about",["prolaim.config"])}(),function(){"use strict";angular.module("prolaim.core",["blocks.exception","blocks.logger","blocks.router","ui.router","ngResource"])}(),function(){"use strict";angular.module("prolaim.templates",[])}(),function(){"use strict";angular.module("prolaim.shell",["prolaim.config"])}(),function(){"use strict";angular.module("prolaim.jobs",["prolaim.config"])}(),function(){"use strict";angular.module("prolaim.main",["prolaim.config"])}(),function(){"use strict";angular.module("prolaim.partners",["prolaim.config"])}(),function(){"use strict";angular.module("blocks.exception",["blocks.logger"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";function a(){console.log("Content placeholder")}angular.module("prolaim.content",[]).controller("Content",a)}(),function(){"use strict";angular.module("prolaim.footer",["prolaim.config"])}(),function(){"use strict";function a(){console.log("Sidebar placeholder")}angular.module("prolaim.sidebar",[]).controller("Sidebar",a)}(),function(){"use strict";function a(a,e,t){function n(){console.log("defaultSettings.language = "+t.language);var a=e.getLanguage()||t.language;o.translate(a)}function r(e){return a.getTranslation(l,e).then(function(a){return a?(o.data=a,o.data):void 0})}console.log("P404: inside the controller");var o=this,l="P404";o.data={LANGUAGE:""},o.translate=r,o.title="Oops! Non-existing page",n()}angular.module("prolaim.404").controller("P404",a),a.$inject=["dataService","languageService","config"]}(),function(){"use strict";function a(a,e,t){function n(){console.log("defaultSettings.language = "+t.language);var a=e.getLanguage()||t.language;o.translate(a)}function r(e){return a.getTranslation(l,e).then(function(a){return a?(o.data=a,o.data):void 0})}console.log("About: inside the controller");var o=this,l="about";o.data={LANGUAGE:""},o.translate=r,o.title="About Prolaim",n()}angular.module("prolaim.about").controller("About",a),a.$inject=["dataService","languageService","config"]}(),function(){"use strict";function a(a){a.options.timeOut=4e3,a.options.positionClass="toast-bottom-right"}function e(a,e,t,r){function o(){function a(a){return a.ready()}var e={ready:a};a.$inject=["dataService"],t.configure({docTitle:"Gulp: ",resolveAlways:e})}a.debugInfoEnabled(!0),e.debugEnabled&&e.debugEnabled(!0),r.configure(n.appErrorPrefix),o()}var t=angular.module("prolaim.core");t.config(a),a.$inject=["toastr"];var n={appErrorPrefix:"[GulpPatterns Error] ",appTitle:"Gulp Patterns",imageBasePath:"/images/photos/",unknownProductImageSource:"unknown_product.jpg",language:"ru"};t.value("config",n),t.config(e),e.$inject=["$compileProvider","$logProvider","routerHelperProvider","exceptionHandlerProvider"]}(),function(){"use strict";angular.module("prolaim.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function a(a,e,t,n,r){function o(t,r){function o(a,e,t,n){return a.data}return a.get("/api/"+t+"/"+r).then(o)["catch"](function(a){n.catcher("XHR Failed for getTranslation")(a),e.url("/")})}function l(){return c||(r.info("Primed the app data"),c=t.when(s)),c}function i(a){return l().then(function(){return a?t.all(a):c})["catch"](n.catcher('"ready" function failed'))}var c,s={getTranslation:o,ready:i};return s}angular.module("prolaim.core").factory("dataService",a),a.$inject=["$http","$location","$q","exception","logger"]}(),function(){"use strict";function a(){function a(a){if(!a)return!1;var e=a.match(/^\/(ru|ua)(\/.*)?/);return!e||e.length<2?!1:e[1]}function e(a){if(!a)return!1;var e=a.match(/^\/(ru|ua)(\/.*)?/);return!e||e.length<3?!1:e[2]}var t={};return t.getLanguageFromPath=a,t.getRestOfPath=e,t}angular.module("prolaim").factory("helper",a)}(),function(){"use strict";function a(a){function e(e){e!==t()?(a.language=e,console.log("setLanguage called. Language changed to "+e)):console.log("setLanguage called with same language = "+e)}function t(){var e=a.language;return console.log("$rootScope.language = "+e),e}console.log("languageService: inside the service");var n=this;return n.getLanguage=t,n.setLanguage=e,n}angular.module("prolaim").factory("languageService",a),a.$inject=["$rootScope"]}(),function(){"use strict";function a(){var a={};return a.getMap=e,a}function e(){var a,e="https://api-maps.yandex.ru/2.1.26/?load=package.standard&lang=uk-RU";return t(e,function(){console.log("ymaps has been loaded, now we are ready"),ymaps.ready(function(){a=n();var e=r();console.log("before placing marker"),a.geoObjects.add(e),console.log("marker placed")})}),console.log("map is ready to be returned to the caller"),a}function t(a,e){var t=document.createElement("script");t.type="text/javascript",t.onload=t.onloadstatechange=function(){t.readyState&&"complete"!==t.readyState&&"loaded"!==t.readyState||(t.onload=t.onloadstatechange=null,angular.isFunction(e)&&e())},t.async=!0,t.src=a,document.getElementsByTagName("head")[0].appendChild(t)}function n(){var a=document.getElementById("prolaim-map"),e={center:[50.381329,30.340411],zoom:16,behaviors:["default","scrollZoom"]};console.log("before ymaps.Map");var t=new ymaps.Map(a,e);return console.log("after ymaps.Map"),t}function r(){var a=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[50.381366,30.340078]},properties:{iconContent:"Офис и склад-магазин"}},{preset:"islands#darkorangeStretchyIcon",draggable:!0});return console.log("marker initialized"),a}angular.module("prolaim").factory("mapService",a)}(),function(){"use strict";function a(a,e,t,n,r,o,l){function i(a){r.setLanguage(a),g(a)}function c(){s(),console.log("shell: translate activated with language "+p),g(p)}function s(){console.log("inside init language function");var a=e.path();console.log("shell: path from $location: "+a),d=o.getLanguageFromPath(a),p=d||l.language,r.setLanguage(p)}function u(){a.$watch("language",function(a){console.log("$WATCH: watched language changed to "+a),g(a)})}function g(a){var r="header",l=t.current;m=e.path(),console.log("shell: path: "+m),d=o.getLanguageFromPath(m),p=a,n.getTranslation(r,a).then(function(a){return a?(v.data=a,p!==d&&e.path(p).replace(),console.log("shell: path after relocation: "+e.path()),v.data):void 0});var i=o.getLanguageFromPath(m),c=o.getRestOfPath(m);console.log("lang: "+i+", rest: "+c);var s="/"+p+c;console.log("newPath: "+s),d!==p&&(console.log("relocating to "+s),e.path(s).replace()),t.reload(l)}console.log("Shell: inside the controller");var p,d,m,v=this;v.data={language:""},v.setLanguageAndTranslate=i,v.navbarCollapsed=!0,c(),u()}angular.module("prolaim.shell").controller("Shell",a),a.$inject=["$rootScope","$location","$state","dataService","languageService","helper","config"]}(),function(){"use strict";function a(a,e,t){function n(){var a=e.getLanguage()||t.language;o.translate(a)}function r(e){return a.getTranslation(l,e).then(function(a){return a?(o.data=a,o.data):void 0})}console.log("Jobs: inside the controller");var o=this,l="jobs";o.data={LANGUAGE:""},o.translate=r,o.title="Prolaim job offers",n()}angular.module("prolaim.jobs").controller("Jobs",a),a.$inject=["dataService","languageService","config"]}(),function(){"use strict";function a(a,e,t){function n(){var a=e.getLanguage()||t.language;o.translate(a)}function r(e){return a.getTranslation(l,e).then(function(a){return a?(o.data=a,o.data):void 0})}console.log("Main: inside the controller");var o=this,l="main";o.data={LANGUAGE:""},o.translate=r,o.title="Prolaim main page",n()}angular.module("prolaim.main").controller("Main",a),a.$inject=["dataService","languageService","config"]}(),function(){"use strict";function a(a,e,t){function n(){var a=e.getLanguage()||t.language;o.translate(a)}function r(e){return a.getTranslation(l,e).then(function(a){return a?(o.data=a,o.data):void 0})}console.log("Partners: inside the controller");var o=this,l="partners";o.data={LANGUAGE:""},o.translate=r,o.title="Partners of Prolaim",n()}angular.module("prolaim.partners").controller("Partners",a),a.$inject=["dataService","languageService","config"]}(),function(){"use strict";function a(){this.config={appErrorPrefix:void 0},this.configure=function(a){this.config.appErrorPrefix=a},this.$get=function(){return{config:this.config}}}function e(a){a.decorator("$exceptionHandler",t)}function t(a,e,t){return function(n,r){var o=e.config.appErrorPrefix||"",l={exception:n,cause:r};n.message=o+n.message,a(n,r),t.error(n.message,l)}}angular.module("blocks.exception").provider("exceptionHandler",a).config(e),e.$inject=["$provide"],t.$inject=["$delegate","exceptionHandler","logger"]}(),function(){"use strict";function a(a){function e(e){return function(t){a.error(e,t)}}var t={catcher:e};return t}angular.module("blocks.exception").factory("exception",a),a.$inject=["logger"]}(),function(){"use strict";function a(a,e){function t(t,n,r){e.error(t,r),a.error("Error: "+t,n)}function n(t,n,r){e.info(t,r),a.info("Info: "+t,n)}function r(t,n,r){e.success(t,r),a.info("Success: "+t,n)}function o(t,n,r){e.warning(t,r),a.warn("Warning: "+t,n)}var l={showToasts:!0,error:t,info:n,success:r,warning:o,log:a.log};return l}angular.module("blocks.logger").factory("logger",a),a.$inject=["$log","toastr"]}(),function(){"use strict";function a(a,e,t){function n(a,n,o,l){function i(a,n){a.forEach(function(a){a.config.resolve=angular.extend(a.config.resolve||{},r.resolveAlways),e.state(a.state,a.config)}),n&&!d&&(d=!0,t.otherwise(n))}function c(){n.$on("$stateChangeError",function(e,t,n,r,o,i){function c(a){var e=t&&(t.title||t.name||t.loadedTemplateUrl)||"unknown target";return"Error routing to "+e+". "+a.message||a.data||". <br/>"+(a.statusText||"")+": "+(a.status||"")}if(!p){m.errors++,p=!0;var s=c(i);l.warning(s,[t]),a.path("/")}})}function s(){c(),g()}function u(){return o.get()}function g(){n.$on("$stateChangeSuccess",function(a,e,t,o,l){m.changes++,p=!1;var i=r.docTitle+" "+(e.title||"");n.title=i})}var p=!1,d=!1,m={errors:0,changes:0},v={configureStates:i,getStates:u,stateCounts:m};return s(),v}var r={docTitle:void 0,resolveAlways:{}};a.html5Mode(!0),this.configure=function(a){angular.extend(r,a)},this.$get=n,n.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",a),a.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function a(a,e,t){function n(){var a=e.getLanguage()||t.language;o.translate(a)}function r(e){return a.getTranslation(l,e).then(function(a){return a?(o.data=a,o.data):void 0})}console.log("Footer: inside the controller");var o=this,l="footer";o.data={LANGUAGE:""},o.translate=r,o.title="Prolaim footer",n()}angular.module("prolaim.footer").controller("Footer",a),a.$inject=["dataService","languageService","config"]}(),angular.module("prolaim.templates").run(["$templateCache",function(a){a.put("app/404/404.html","<div class=page-header><h1>{{ vm.data.TITLE }}</h1><h3>{{ vm.data.SUBTITLE }}</h3>{{ vm.error }}</div>"),a.put("app/about/about.html","<div class=page-header><h1>{{ vm.data.TITLE }}</h1><h3>{{ vm.data.SUBTITLE }}</h3>{{ vm.error }}</div>"),a.put("app/jobs/jobs.html","<div class=page-header><h1>{{ vm.data.TITLE }}</h1><h3>{{ vm.data.SUBTITLE }}</h3>{{ vm.error }}</div>"),a.put("app/layout/shell.html","<section class=container><header id=header><div ui-view=header@shell></div></header><section><div class=row><aside id=sidebar class=col-md-2><div ui-view=sidebar@shell></div></aside><section id=content class=col-md-10><div ui-view=content></div></section></div></section><footer id=footer class=clearfix><div ui-view=footer@shell></div></footer></section>"),a.put("app/partners/partners.html","<div class=page-header><h1>{{ vm.data.TITLE }}</h1><h3>{{ vm.data.SUBTITLE }}</h3>{{ vm.error }}</div>"),a.put("app/main/main.html","<div class=page-header><h1>{{ vm.data.TITLE }}</h1><h3>{{ vm.data.SUBTITLE }}</h3>{{ vm.error }}</div>"),a.put("app/layout/header/header.html","<div ui-view=topnav></div><div ui-view=navbar></div>"),a.put("app/layout/header/navbar.html",'<nav class="navbar navbar-default" id=navbar role=navigation><div class=container-fluid id=menu-border><div class=navbar-header><button type=button class="navbar-toggle collapsed" ng-click="vm.navbarCollapsed = !vm.navbarCollapsed"><span class=sr-only>{{ vm.data.MENU.TOGGLE }}</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button></div><div class="collapse navbar-collapse" collapse=vm.navbarCollapsed><ul class="nav navbar-nav"><li class="item active" ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.CEMENT | uppercase }}<span class=sr-only>(current)</span></a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.POTASSIUM | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.MIXES | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.FILLING | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.MASH | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.OTHER | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.PRICES | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.DELIVERY | uppercase }}</a></li></ul></div></div></nav>'),a.put("app/layout/header/topnav.html",'<nav class="navbar navbar-default" id=topnav><div class="container-fluid topnav-left"><div class=navbar-header><a class=navbar-brand ui-sref=shell.lang.content.main><img ng-src=images/prolaim.png></a></div><div class="collapse navbar-collapse" collapse=vm.navbarCollapsed><ul class="nav navbar-nav"><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.main>{{ vm.data.MENU.MAIN | uppercase }}<span class=sr-only>(current)</span></a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.about>{{ vm.data.MENU.ABOUT | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.partners>{{ vm.data.MENU.PARTNERS | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.jobs>{{ vm.data.MENU.JOBS | uppercase }}</a></li><li class=item ui-sref-active=active><a ui-sref=shell.lang.content.contact>{{ vm.data.MENU.CONTACT | uppercase }}</a></li></ul></div></div><div class=topnav-right><div class="nav navbar-nav navbar-right" id=flags><input type=image ng-click="vm.setLanguageAndTranslate(\'ru\')" ng-src=images/russia.png alt=Русский title=Русский> <input type=image ng-click="vm.setLanguageAndTranslate(\'ua\')" ng-src=images/ukraine.png alt=Українська title=Українська></div><div class=pull-right><form class="navbar-form navbar-right" role=search><div class=form-group><input type=text class=form-control placeholder="{{ vm.data.SEARCH_HINT }}"></div><button type=submit class="btn btn-default">{{ vm.data.SEARCH | uppercase }}</button></form></div></div></nav>'),a.put("app/layout/partials/content.html","<div ui-view></div>"),a.put("app/layout/partials/footer.html",'<div class=center-block><h4>Здесь будет футер со всякого рода полезной информацией</h4><div><span class="glyphicon glyphicon-copyright-mark" aria-hidden=true></span> <span class=sr-only>Copyright</span> {{ vm.data.COPYRIGHT }}</div>{{ vm.error }}</div>'),a.put("app/layout/partials/sidebar.html","<h4>Это - боковая панель, на которой клиенту будут предоставлены расширенные возможности для поиска</h4>")}]);